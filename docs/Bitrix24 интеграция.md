# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∞–π—Ç–∞ –†–æ—Å—Ç–§–µ—Ä—Ä—É–º —Å –ë–∏—Ç—Ä–∏–∫—Å24 CRM

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞—è–≤–∫–∏ —Å —Å–∞–π—Ç–∞ –≤ CRM –ë–∏—Ç—Ä–∏–∫—Å24, –≤–∫–ª—é—á–∞—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ö–æ–¥—è—â–µ–≥–æ –≤–µ–±—Ö—É–∫–∞

1. **–í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É –ë–∏—Ç—Ä–∏–∫—Å24** –ø–æ –∞–¥—Ä–µ—Å—É https://rostferrum.bitrix24.ru/

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º":**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∞–≤–∞—Ç–∞—Ä –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
   - –í—ã–±–µ—Ä–∏—Ç–µ "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º" ‚Üí "–î—Ä—É–≥–æ–µ" ‚Üí "–í—Ö–æ–¥—è—â–∏–π –≤–µ–±—Ö—É–∫"

3. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –≤–µ–±—Ö—É–∫:**
   - –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –≤–µ–±—Ö—É–∫"
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–°–∞–π—Ç –†–æ—Å—Ç–§–µ—Ä—Ä—É–º"
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –≤—ã–±–µ—Ä–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏–ª–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
     - ‚úÖ **CRM (crm)** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–∏–¥–æ–≤
     - ‚úÖ **–î–∏—Å–∫ (disk)** - –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
     - ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (user)** - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö

4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ URL –≤–µ–±—Ö—É–∫–∞** - –æ–Ω –±—É–¥–µ—Ç –≤–∏–¥–∞:
   ```
   https://rostferrum.bitrix24.ru/rest/USER_ID/WEBHOOK_CODE/
   ```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π –ª–∏–¥–∞

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ CRM ‚Üí –õ–∏–¥—ã ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏**

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
   - –ù–∞–∑–≤–∞–Ω–∏–µ –ª–∏–¥–∞
   - –ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞  
   - –¢–µ–ª–µ—Ñ–æ–Ω
   - Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ª–∏–¥–æ–≤:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" ‚Üí "CRM" ‚Üí "–ò—Å—Ç–æ—á–Ω–∏–∫–∏"
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ "WEB" –∏–ª–∏ "–í–µ–±-—Å–∞–π—Ç"

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ

1. **–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö CRM –Ω–∞–π–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ö–æ–º–ø–∞–Ω–∏—è" ‚Üí "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏"
   - –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
   - ID –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ URL –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –ø—Ä–æ—Ñ–∏–ª—è

2. **–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
   ```
   GET https://rostferrum.bitrix24.ru/rest/1/1q4w7kljo6pwr111/user.get.json
   ```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–æ—Ä–æ–Ω–∫—É –¥–ª—è –ª–∏–¥–æ–≤ —Å —Å–∞–π—Ç–∞:**
   - CRM ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –í–æ—Ä–æ–Ω–∫–∏ –∏ —Ç—É–Ω–Ω–µ–ª–∏ –ø—Ä–æ–¥–∞–∂
   - –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–æ—Ä–æ–Ω–∫—É "–ó–∞—è–≤–∫–∏ —Å —Å–∞–π—Ç–∞" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ª–∏–¥–∞—Ö
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–∞–π—Ç–µ

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```bash
# –ë–∏—Ç—Ä–∏–∫—Å24 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
BITRIX24_WEBHOOK_URL=https://rostferrum.bitrix24.ru/rest/1/1q4w7kljo6pwr111
BITRIX24_RESPONSIBLE_USER_ID=1

# –î—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏...
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
.venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

```bash
cd scripts
python -c "
import asyncio
from bitrix24_integration import test_bitrix24_integration
asyncio.run(test_bitrix24_integration())
"
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª—è –ª–∏–¥–∞ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

| –ü–æ–ª–µ –ë–∏—Ç—Ä–∏–∫—Å24 | –ü–æ–ª–µ —Ñ–æ—Ä–º—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------------|------------|----------|
| `TITLE` | –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | "–ó–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞ - {–∏–º—è}" |
| `NAME` | `name` | –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞ |
| `PHONE` | `phone` | –¢–µ–ª–µ—Ñ–æ–Ω (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π) |
| `EMAIL` | `email` | Email (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω) |
| `COMMENTS` | `message` | –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ |
| `SOURCE_ID` | `WEB` | –ò—Å—Ç–æ—á–Ω–∏–∫ - –≤–µ–±-—Å–∞–π—Ç |
| `SOURCE_DESCRIPTION` | "–°–∞–π—Ç –†–æ—Å—Ç–§–µ—Ä—Ä—É–º" | –û–ø–∏—Å–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ |
| `ASSIGNED_BY_ID` | –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ | ID –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ |

### –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- –§–∞–π–ª—ã —Å–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ "–î–∏—Å–∫" –ë–∏—Ç—Ä–∏–∫—Å24
- –ó–∞—Ç–µ–º –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∫ –ª–∏–¥—É —á–µ—Ä–µ–∑ –ø–æ–ª–µ `UF_CRM_TASK`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PDF, DOC, DOCX, XLS, XLSX, JPG, JPEG, PNG, GIF, TXT

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
.venv\Scripts\uvicorn scripts.api:app --reload --log-level info
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

1. **"Invalid webhook URL"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL –≤ `.env`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–µ–±—Ö—É–∫ –∞–∫—Ç–∏–≤–µ–Ω –≤ –ë–∏—Ç—Ä–∏–∫—Å24

2. **"Access denied"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤–µ–±—Ö—É–∫–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω—ã –ø—Ä–∞–≤–∞ –Ω–∞ CRM –∏ –î–∏—Å–∫

3. **"User not found"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `BITRIX24_RESPONSIBLE_USER_ID`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ API `user.get` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

4. **"File upload failed"**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ª–∏–º–∏—Ç ~10MB)
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∏–ø —Ñ–∞–π–ª–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

–ó–∞—è–≤–∫–∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î SQLite, –¥–∞–∂–µ –µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –ë–∏—Ç—Ä–∏–∫—Å24 –Ω–µ —É–¥–∞–ª–∞—Å—å.

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–∏–¥–æ–≤ –≤ –ë–∏—Ç—Ä–∏–∫—Å24

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ CRM ‚Üí –õ–∏–¥—ã
2. –û—Ç—Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É "WEB"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- [ ] Webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –ª–∏–¥–æ–≤ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Å–∞–π—Ç
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–æ—Ä–æ–Ω–∫–∞–º–∏ –ø—Ä–æ–¥–∞–∂
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫ –∏–∑ –ª–∏–¥–æ–≤
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ë–∏—Ç—Ä–∏–∫—Å24
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ª–∏–¥–∞

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è:**
   - –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–ª—è –≤ CRM
   - –û–±–Ω–æ–≤–∏—Ç–µ `LeadConverter.convert_lead_data()` –¥–ª—è –∏—Ö –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –ë–∏—Ç—Ä–∏–∫—Å24
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∏–µ–π

3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞:**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –ª–∏–¥–æ–≤
   - –û—Ç—á–µ—Ç—ã –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º —Ç—Ä–∞—Ñ–∏–∫–∞
   - ROI —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–º–ø–∞–Ω–∏–π

---

**–°–æ–∑–¥–∞–Ω–æ:** 10 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** 1.0
